<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Page</title>

    <!-- font awesome cdn link  -->
    <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />

    <!-- custom css file link  -->
    <link rel="stylesheet" href="css/styleCrud.css" />
</head>
<body>
    <div class="container">
        <div class="form-background">
            <div class="admin-product-form-container">
                <form id="productForm">
                    <h3>add a new product</h3>
                    <input type="text" placeholder="enter product name" id="productName" class="box" />
                    <input type="file" accept="image/png, image/jpeg, image/jpg" id="productImage" class="box" />
                    <input type="number" placeholder="enter product price" id="productPrice" class="box" />
                    <input type="text" placeholder="enter product category" id="productCategory" class="box" />
                    <input type="submit" class="btn" value="add product" />
                </form>
            </div>
        </div>

        <div class="product-display">
            <table class="product-display-table">
                <thead>
                    <tr>
                        <th>product image</th>
                        <th>product name</th>
                        <th>product category</th>
                        <th>product price</th>
                        <th>action</th>
                    </tr>
                </thead>
                <tbody id="productTable"></tbody>
            </table>
        </div>
    </div>

    <script>
        document.getElementById("productForm").addEventListener("submit", function (e) {
            e.preventDefault();

            const productName = document.getElementById("productName").value;
            const productPrice = document.getElementById("productPrice").value;
            const productCategory = document.getElementById("productCategory").value;
            const productImage = document.getElementById("productImage").files[0];

            if (productName && productPrice && productCategory && productImage) {
                const reader = new FileReader();
                reader.onload = function (event) {
                    const newRow = document.createElement("tr");
                    newRow.innerHTML = `
                        <td><img src="${event.target.result}" height="100" alt=""></td>
                        <td>${productName}</td>
                        <td>${productCategory}</td>
                        <td>$${productPrice}/-</td>
                        <td>
                            <button class="btn" onclick="editProduct(this)"> <i class="fas fa-edit"></i> edit </button>
                            <button class="btn" onclick="deleteProduct(this)"> <i class="fas fa-trash"></i> delete </button>
                        </td>
                    `;
                    document.getElementById("productTable").appendChild(newRow);
                };
                reader.readAsDataURL(productImage);

                // Clear form
                document.getElementById("productForm").reset();
            }
        });

        function editProduct(button) {
            const row = button.parentElement.parentElement;
            const name = row.children[1].textContent;
            const category = row.children[2].textContent;
            const price = row.children[3].textContent.substring(1, row.children[3].textContent.length - 2);

            document.getElementById("productName").value = name;
            document.getElementById("productCategory").value = category;
            document.getElementById("productPrice").value = price;
            // Note: Image editing requires additional logic
            row.remove();
        }

        function deleteProduct(button) {
            button.parentElement.parentElement.remove();
        }
    </script>
</body>
</html>
